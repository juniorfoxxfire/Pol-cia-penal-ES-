<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PREPARAT√ìRIO √ÅREA POLICIAL</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f9;
            color: #333;
        }
        #simulado-container {
            display: flex;
            max-width: 1400px;
            margin: 20px auto;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            min-height: 80vh;
        }
        /* Barra Lateral de Navega√ß√£o (Desktop) */
        #painel-navegacao {
            flex: 0 0 280px;
            padding: 20px;
            background-color: #e9ecef;
            border-right: 1px solid #ddd;
            border-top-left-radius: 8px;
            border-bottom-left-radius: 8px;
            position: sticky;
            top: 0;
            height: fit-content;
        }
        /* √Årea Principal de Conte√∫do */
        #painel-principal {
            flex-grow: 1;
            padding: 30px;
        }
        h1 {
            color: #004d99;
            border-bottom: 2px solid #004d99;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        h2 {
            color: #004d99;
            margin-top: 0;
            margin-bottom: 15px;
        }
        /* Configura√ß√£o de 5 colunas para a navega√ß√£o (Desktop) */
        #botoes-questoes {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }
        .btn-navegacao {
            background-color: #ccc;
            color: #333;
            border: none;
            padding: 10px 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.2s;
        }
        .btn-navegacao:hover:not(.acertou):not(.errou):not(.atual) {
            background-color: #b0b0b0;
        }
        /* --- ESTILOS DE CORRE√á√ÉO --- */
        .btn-navegacao.respondida {
            background-color: #28a745; 
            color: white;
        }
        .btn-navegacao.acertou { 
            background-color: #28a745;
            color: white;
            font-weight: bold;
        }
        .btn-navegacao.errou { 
            background-color: #dc3545;
            color: white;
            font-weight: bold;
        }
        /* --------------------------- */
        .btn-navegacao.atual {
            background-color: #007bff;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.7);
        }

        /* Estilos da Quest√£o */
        .questao-card {
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .alternativa-item {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .alternativa-item input[type="radio"] {
            margin-right: 10px;
        }
        /* Cores de Corre√ß√£o */
        .alternativa-item.correta {
            background-color: #d4edda !important; 
            border-color: #c3e6cb !important;
            font-weight: bold;
        }
        .alternativa-item.errada {
            background-color: #f8d7da !important; 
            border-color: #f5c6cb !important;
            color: #721c24;
        }

        .rodape-questao {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        /* Bot√µes de A√ß√£o */
        .btn-acao {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            margin-right: 10px; 
            transition: background-color 0.2s;
        }
        .btn-finalizar {
            background-color: #dc3545;
            color: white;
        }
        .btn-reiniciar {
            background-color: #ffc107;
            color: #333;
        }
        .btn-admin-tab {
            background-color: #004d99;
            color: white;
            margin-bottom: 20px;
        }
        .btn-compartilhar {
            background-color: #17a2b8; /* Cor para o bot√£o de compartilhamento */
            color: white;
        }
        
        /* Resultados */
        .resultado {
            padding: 30px;
            text-align: center;
        }
        .acerto {
            color: #28a745;
            font-weight: bold;
        }
        .erro {
            color: #dc3545;
            font-weight: bold;
        }

        /* Admin Panel Styles */
        #painel-administrador textarea {
            width: 100%;
            min-height: 200px;
            margin-bottom: 10px;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .admin-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .admin-list-item:nth-child(even) {
            background-color: #f9f9f9;
        }
        .btn-deletar-individual {
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            font-size: 12px;
            margin: 0;
        }
        .btn-deletar-tudo {
            background-color: #6c757d;
            color: white;
            margin-top: 20px;
        }

        /* ============================================== */
        /* MEDIA QUERIES PARA RESPONSIVIDADE (MOBILE/TABLET) */
        /* ============================================== */
        @media (max-width: 768px) {
            #simulado-container {
                flex-direction: column; /* Pilha os pain√©is */
                margin: 10px;
                box-shadow: none; /* Remove a sombra no celular */
            }
            #painel-navegacao {
                flex: auto; /* Permite largura total */
                width: 100%;
                position: relative; /* N√£o fica sticky no celular */
                border-right: none;
                border-bottom: 1px solid #ddd;
                border-radius: 8px;
                margin-bottom: 10px;
                padding: 15px;
                border-top-right-radius: 8px; /* Arredonda o topo direito */
                border-bottom-left-radius: 0; /* Remove arredondamento do canto inferior esquerdo */
            }
            #painel-principal {
                padding: 15px;
            }
            
            /* Deixa os bot√µes de navega√ß√£o mais compactos */
            #botoes-questoes {
                grid-template-columns: repeat(8, 1fr); /* 8 colunas para melhor aproveitamento */
                gap: 5px;
            }
            .btn-navegacao {
                padding: 8px 3px;
                font-size: 10px;
            }

            /* Bot√µes de navega√ß√£o da quest√£o (Anterior/Pr√≥xima) em coluna */
            .rodape-questao {
                flex-direction: column;
            }
            .rodape-questao button {
                margin: 5px 0;
            }

            /* Bot√µes de a√ß√£o (Finalizar/Reiniciar) em coluna ou ajustados */
            .btn-acao {
                width: 100%;
                margin-right: 0;
            }
            .btn-admin-tab {
                width: 48%; /* Permite 2 bot√µes lado a lado no menu */
                margin-right: 4%;
            }
            .btn-admin-tab:last-child {
                margin-right: 0;
            }
        }
        @media (max-width: 480px) {
            #botoes-questoes {
                grid-template-columns: repeat(6, 1fr); /* 6 colunas para telas muito pequenas */
            }
        }
    </style>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#004d99">
</head>
<body>

<div id="simulado-container">
    
    <div id="painel-navegacao">
        <h2>Menu</h2>
        <button class="btn-acao btn-admin-tab" onclick="mostrarSimulado()">Simulado</button>
        <button class="btn-acao btn-admin-tab" onclick="mostrarAdmin()">Administrador</button>
        
        <div id="navegacao-simulado">
            <h2>Navega√ß√£o de Quest√µes</h2>
            <div id="botoes-questoes">
                </div>
            <button class="btn-acao btn-reiniciar" onclick="reiniciarSimulado()">Reiniciar Simulado</button>
            <button class="btn-acao btn-finalizar" onclick="finalizarSimulado()">Finalizar Simulado</button>
        </div>
    </div>

    <div id="painel-principal">
        <h1 id="titulo-principal">PREPARAT√ìRIO √ÅREA POLICIAL</h1>

        <div id="area-simulado">
            <div id="area-questao">
                <h2>Carregando Simulado...</h2>
            </div>
            <div id="area-resultado" style="display:none;">
                </div>
        </div>

        <div id="painel-administrador" style="display:none;">
            <h2>Gerenciamento de Quest√µes</h2>
            
            <p>Insira as quest√µes no formato JSON (Array de objetos) para adicionar ao banco de dados.</p>
            <textarea id="json-input" placeholder='Exemplo: [{"numero": 61, "enunciado": "Nova Quest√£o...", "alternativas": {"A": "Alt A", "B": "Alt B"}, "correta": "A"}]'></textarea>
            <button class="btn-acao" onclick="carregarQuestoesJSON()">Adicionar Quest√µes</button>
            <hr>

            <h3>Quest√µes Atuais (<span id="count-questoes">0</span>)</h3>
            <div id="lista-admin">
                </div>
            <button class="btn-acao btn-deletar-tudo" onclick="deletarTodasQuestoes()">Excluir TODAS as Quest√µes</button>
        </div>
    </div>
</div>

<script>
// JSON de quest√µes padr√£o
const questoesPadrao = [
    { "numero": 1, "enunciado": "Em: \"Se voc√™ apenas exportar commodities para a China, nunca conseguir√° esse efeito positivo do emprego industrial na sociedade, dado que voc√™ n√£o precisar√° de tanta m√£o de obra remunerada e de alta produtividade\", conclui. Pode ser substitu√≠da, sem altera√ß√£o de sentido, a express√£o destacada no texto por:", "alternativas": { "A": "Ainda que.", "B": "Desde que.", "C": "Porquanto.", "D": "Apesar de que" }, "correta": "C" },
    { "numero": 2, "enunciado": "Em: \"...o agri√£o se destaca pela sua riqueza nutritiva. O vegetal de folhas escuras...\" O recurso utilizado no trecho acima √© identificado como:", "alternativas": { "A": "Zeugma.", "B": "Hip√°lage.", "C": "An√°fora.", "D": "Conota√ß√£o." }, "correta": "C" },
    { "numero": 3, "enunciado": "O que originou o termo \"gladiador\" na sociedade romana? (Baseado no texto fornecido, que diz que o termo deriva de sua principal arma, o gl√°dio)", "alternativas": { "A": "O tipo de entretenimento que ofereciam.", "B": "A arma utilizada pelos lutadores.", "C": "A arena onde ocorriam as lutas.", "D": "O nome do principal palco de combates." }, "correta": "B" },
    { "numero": 4, "enunciado": "Qual era a realidade da vida dos gladiadores na Roma antiga, segundo o texto?", "alternativas": { "A": "Todos os gladiadores eram ricos e escolhiam a profiss√£o por fama.", "B": "Gladiadores raramente se tornavam famosos, mas tinham longa expectativa de vida.", "C": "Gladiadores tinham uma vida curta e lutavam por necessidade.", "D": "A profiss√£o de gladiador era sempre volunt√°ria e trazia luxo para todos os participantes." }, "correta": "C" },
    { "numero": 5, "enunciado": "Correlacione a posi√ß√£o dos pronomes √°tonos (√änclise - I; Mes√≥clise - II; Pr√≥clise - III) nas seguintes ora√ß√µes: 1. Algum...lhes dar√£o; 2. Convid√°-lo-ei; 3. Chamem-me; 4. J√°...n√£o o quero; 5. Encantei-me.", "alternativas": { "A": "I > II > III > I > III.", "B": "III > I > II > III > II.", "C": "III > II > I > III > I.", "D": "II > I > III > II > III." }, "correta": "C" },
    { "numero": 6, "enunciado": "Em quais das afirmativas lidas h√° o emprego de termo com a ortografia incorreta nos termos da Norma Culta da L√≠ngua Portuguesa? (I. bicabornato; IV. excess√£o; V. reinvidicar)", "alternativas": { "A": "II, III e V.", "B": "I, IV e V.", "C": "I, III e IV.", "D": "II e IV." }, "correta": "B" },
    { "numero": 7, "enunciado": "Quanto aos termos da ora√ß√£o em negrito (o termo cuja fun√ß√£o sint√°tica √© nomeada na alternativa), seguindo os fragmentos musicais, assinale a alternativa correta quanto √† fun√ß√£o sint√°tica dos termos destacados.", "alternativas": { "A": "‚ÄúTodo dia ela faz tudo sempre igual‚Äù - Fun√ß√£o sint√°tica: objeto indireto. (Incorreta, √© Objeto Direto)", "B": "‚ÄúMe sorri um sorriso pontual‚Äù - Fun√ß√£o sint√°tica: objeto indireto. (Correta, 'Me' √© Objeto Indireto)", "C": "‚Äú√â um lago negro o seu olhar‚Äù - Fun√ß√£o sint√°tica: sujeito. (Correta, 'o seu olhar' √© Sujeito)", "D": "‚ÄúE morrer no mar (no mar)‚Äù - Fun√ß√£o sint√°tica: complemento nominal. (Incorreta, √© Adjunto Adverbial)" }, "correta": "D" },
    { "numero": 8, "enunciado": "Marque a fun√ß√£o da linguagem que predomina no per√≠odo: \"O brasileiro n√£o l√™, mas vez ou outra aparecem best-sellers por aqui\".", "alternativas": { "A": "Referencial.", "B": "Po√©tica.", "C": "Apelativa.", "D": "F√°tica." }, "correta": "A" },
    { "numero": 9, "enunciado": "A frase abaixo que mostra perfeita adequa√ß√£o vocabular √©:", "alternativas": { "A": "No deserto, a alta temperatura √© vis√≠vel.", "B": "Gra√ßas aos medicamentos, curou o resfriado.", "C": "Nas provas, esperava enfrentar algumas facilidades.", "D": "Foi elogiado por causa do ato solid√°rio que cometeu." }, "correta": "B" },
    { "numero": 10, "enunciado": "Identifique a alternativa que completa correta e respectivamente as lacunas abaixo, de acordo com as regras de reg√™ncia estabelecidas pela norma culta: voltadas (1)...sa√∫de; para (2)...a popula√ß√£o; O acesso (3)...sa√∫de; acesso (4)...m√©dicos.", "alternativas": { "A": "A, a qual, √†, aos", "B": "A, quais, √†, os", "C": "Para a, as quais, √†, aos", "D": "Para a, as quais, a, os" }, "correta": "D" },
    { "numero": 11, "enunciado": "Jo√£o: 2f + 3c = 130. Perla: 3f + 2c = 145. Quanto custou cada item?", "alternativas": { "A": "Cada fone custou R$ 40,00 e cada carregador R$ 25,00.", "B": "Cada fone custou R$ 30,00 e cada carregador R$ 15,00.", "C": "Cada fone custou R$ 25,00 e cada carregador R$ 20,00.", "D": "Cada fone custou R$ 35,00 e cada carregador R$ 20,00." }, "correta": "D" },
    { "numero": 12, "enunciado": "Meirielen usa a teoria do desvio padr√£o para determinar nota extra. Se Ana tirou 6,2, 9,3 e 7,4, quanto ela ganhou de nota extra? (Quest√£o incompleta, resposta determinada pelo gabarito prov√°vel de concurso).", "alternativas": { "A": "Ela recebeu 1,7 pontos.", "B": "Ela recebeu 1,3 pontos.", "C": "Ela recebeu 2,1 pontos.", "D": "Ela recebeu 1 ponto." }, "correta": "B" },
    { "numero": 13, "enunciado": "O aplicativo de banco disponibiliza 15 s√≠mbolos para formar uma senha com 6 d√≠gitos. Quantas senhas diferentes √© poss√≠vel formar com esse sistema? (O gabarito aponta para Combina√ß√£o C(15, 6), embora a ordem importe em senhas).", "alternativas": { "A": "√â poss√≠vel formar 7.200 senhas diferentes.", "B": "√â poss√≠vel formar 4.580 senhas diferentes.", "C": "√â poss√≠vel formar 6.300 senhas diferentes.", "D": "√â poss√≠vel formar 5.005 senhas diferentes." }, "correta": "D" },
    { "numero": 14, "enunciado": "Total de R$ 600 mil investido em A e B. P1: (3/5)A + (2/3)B = R$ 376 mil. Qual o investimento em A no segundo semestre?", "alternativas": { "A": "R$ 80 mil.", "B": "R$ 144 mil.", "C": "R$ 160 mil.", "D": "R$ 216 mil." }, "correta": "B" },
    { "numero": 15, "enunciado": "Licen√ßa A: R$ 120; B: R$ 150. Total: 40 licen√ßas. Custo: R$ 5.700. Quantidade de licen√ßas tipo B?", "alternativas": { "A": "10.", "B": "15.", "C": "20.", "D": "30." }, "correta": "D" },
    { "numero": 16, "enunciado": "Bernardo elaborou a equa√ß√£o 2x + 5 = 47, e o resultado √© a sua idade. Quantos anos Bernardo tem?", "alternativas": { "A": "Bernardo tem 16 anos.", "B": "Bernardo tem 24 anos.", "C": "Bernardo tem 18 anos.", "D": "Bernardo tem 21 anos." }, "correta": "D" },
    { "numero": 17, "enunciado": "Nega√ß√£o l√≥gica da afirma√ß√£o: \"Se os livros foram catalogados, ent√£o eles j√° foram distribu√≠dos nas estantes\".", "alternativas": { "A": "Os livros foram catalogados e n√£o foram distribu√≠dos nas estantes.", "B": "Os livros n√£o foram catalogados e n√£o foram distribu√≠dos nas estantes.", "C": "Os livros foram catalogados ou foram distribu√≠dos nas estantes.", "D": "Se os livros n√£o foram catalogados, ent√£o eles n√£o foram distribu√≠dos nas estantes." }, "correta": "A" },
    { "numero": 18, "enunciado": "Observe a sequ√™ncia: P, R, P, R, E, V, P, R, P, R, E, V ... Determine o par de letras que ocupa, respectivamente, a 2025¬™ e a 2026¬™ posi√ß√µes.", "alternativas": { "A": "R, E.", "B": "E, V.", "C": "P, R.", "D": "R, P." }, "correta": "C" },
    { "numero": 19, "enunciado": "Idades: A = M + 1; M = J + 2; J = S - 1; L = J - 2. Assinale a alternativa correta.", "alternativas": { "A": "Maria √© a mais velha entre os cinco.", "B": "Andr√© √© cinco anos mais velho que Luzia.", "C": "S√¥nia √© a mais nova entre os cinco.", "D": "Andr√© e Jos√© t√™m um ano de diferen√ßa." }, "correta": "B" },
    { "numero": 20, "enunciado": "Todas as salas do 1¬∫ andar do bloco C t√™m AC. Nem todas as salas do bloco C t√™m AC. Pode-se concluir que:", "alternativas": { "A": "no col√©gio, todas as salas do primeiro andar t√™m ar-condicionado.", "B": "pelo menos uma sala que n√£o est√° no primeiro andar tem ar-condicionado.", "C": "nenhuma outra sala tem ar-condicionado.", "D": "pelo menos uma sala do bloco C n√£o est√° no primeiro andar." }, "correta": "D" },
    { "numero": 21, "enunciado": "Agenda 2030 da ONU tem por tema:", "alternativas": { "A": "‚ÄúTransformando o Nosso Mundo: A Agenda 2030 para o Desenvolvimento Ecoglobal‚Äù", "B": "‚ÄúTransformando o Nosso Mundo: A Agenda 2030 para o em paz‚Äù", "C": "‚ÄúTransformando o Nosso Mundo: A Agenda 2030 para o Desenvolvimento Sustent√°vel‚Äù", "D": "‚ÄúTransformando o Nosso Mundo: A Agenda 2030 para o Desenvolvimento do ser humano‚Äù" }, "correta": "C" },
    { "numero": 22, "enunciado": "Governo do Estado anunciou em 2025 a contrata√ß√£o de:", "alternativas": { "A": "a contrata√ß√£o de at√© 4,8 mil c√¢meras corporais que ser√£o utilizadas pelas for√ßas de seguran√ßa do Esp√≠rito Santo a partir deste ano.", "B": "a contrata√ß√£o de at√© 4,8 mil totens que ser√£o utilizadas pelas for√ßas de seguran√ßa do Esp√≠rito Santo a partir deste ano.", "C": "a contrata√ß√£o de at√© 4,8 mil novas viaturas que ser√£o utilizadas pelas for√ßas de seguran√ßa do Esp√≠rito Santo a partir deste ano.", "D": "a contrata√ß√£o de at√© 4,8 mil armas de fogo e n√£o letais que ser√£o utilizadas pelas for√ßas de seguran√ßa do Esp√≠rito Santo a partir deste ano." }, "correta": "A" },
    { "numero": 23, "enunciado": "As for√ßas de seguran√ßa do Esp√≠rito Santo alcan√ßaram a marca de 400 pris√µes realizadas com o uso de:", "alternativas": { "A": "com uso de tecnologia de reconhecimento facial.", "B": "com uso de drones.", "C": "com uso de tecnologia totens eletronicos e radares.", "D": "com uso de mega opera√ß√µes de blitz." }, "correta": "A" },
    { "numero": 24, "enunciado": "Em 2025 Esp√≠rito Santo passou a dispor de monitoramento de 24 horas de:", "alternativas": { "A": "monitoramento ininterrupto, e praticamente em tempo real, de inc√™ndios em vegeta√ß√£o em todo o territ√≥rio capixaba.", "B": "monitoramento ininterrupto, e praticamente em tempo real, do mar, principalemente em pontos turisticos, em todo o territ√≥rio capixaba.", "C": "monitoramento ininterrupto, e praticamente em tempo real, do mar, principalemente em pontos turisticos, em todo o territ√≥rio capixaba.", "D": "B - monitoramento ininterrupto, e praticamente em tempo real, do mar, das rodovias (cerco inteligente), em todo o territ√≥rio capixaba." }, "correta": "A" },
    { "numero": 25, "enunciado": "Em setembro de 2025 - O sistema Aquavi√°rio recebeu nesta semana a sua quinta embarca√ß√£o:", "alternativas": { "A": "O novo barco, batizado de FRADINHO, segue o padr√£o dos demais...", "B": "O novo barco, batizado de MESTRE √ÅLVARO, segue o padr√£o dos demais e conta com climatiza√ß√£o, acessibilidade... Inicialmente, a Mestre √Ålvaro vai operar no trecho entre a Prainha, em Vila Velha, e a Pra√ßa do Papa, em Vit√≥ria...", "C": "O novo barco, batizado de MESTRE √ÅLVARO, segue o padr√£o dos demais... A Mestre √Ålvaro vai operar no trecho entre a Serra e Vit√≥ria.", "D": "O novo barco, batizado de QUEIMADOS, segue o padr√£o dos demais e conta com climatiza√ß√£o, acessibilidade..." }, "correta": "B" },
    { "numero": 26, "enunciado": "Classifique os softwares: (1) Word, Excel, Jogos; (2) Sistemas Operacionais, Interface e Rede; (3) Antiv√≠rus e Compactadores de arquivos.", "alternativas": { "A": "b√°sico, utilit√°rio e aplicativo.", "B": "b√°sico, aplicativo e utilit√°rio.", "C": "aplicativo, b√°sico e utilit√°rio.", "D": "aplicativo, utilit√°rio e b√°sico." }, "correta": "C" },
    { "numero": 27, "enunciado": "Um usu√°rio formatou um par√°grafo no MS-Word. Selecionou todo o par√°grafo e pressionou Centralizado, Negrito e It√°lico, nessa ordem. Assumindo que o par√°grafo tinha 4 palavras e estava inicialmente **todo em Negrito** e **sem It√°lico**, o n√∫mero de palavras em negrito e it√°lico √©, respectivamente:", "alternativas": { "A": "0 e 4.", "B": "0 e 2.", "C": "2 e 2.", "D": "2 e 4." }, "correta": "A" },
    { "numero": 28, "enunciado": "Tabelas Din√¢micas no Excel 2019. Marque V ou F: (1) exigem complementos de terceiros para segmenta√ß√µes; (2) poss√≠vel configurar segmenta√ß√µes; (3) conex√£o com Power Query facilita integra√ß√£o; (4) aplica√ß√£o de formata√ß√£o condicional integrada.", "alternativas": { "A": "V, V, V, V.", "B": "V, F, F, V.", "C": "F, F, V, V.", "D": "F, V, V, V." }, "correta": "D" },
    { "numero": 29, "enunciado": "Qual atalho de teclado do navegador Mozilla Firefox (em portugu√™s) o servidor deve utilizar para consultar rapidamente as ‚ÄúInforma√ß√µes da p√°gina‚Äù?", "alternativas": { "A": "Ctrl + I", "B": "Ctrl + Shift + J", "C": "Ctrl + U", "D": "Ctrl + Shift + M" }, "correta": "A" },
    { "numero": 30, "enunciado": "A principal e correta fun√ß√£o de um firewall em uma rede de computadores √©:", "alternativas": { "A": "centralizar todas as informa√ß√µes que transitam pela rede em um √∫nico n√≥, que √© onde ele est√° instalado, para que possa criptograf√°-los.", "B": "controlar o tr√°fego de dados entre redes, permitindo ou bloqueando conex√µes com base em regras predefinidas.", "C": "detectar √© remover v√≠rus de arquivos √© bloquear √† comunica√ß√£o de dados instantaneamente em toda a rede quando um malware se apresenta.", "D": "contribuir para acelerar a velocidade de conex√£o √† internet em conjunto com aplicativos aceleradores de tr√°fego." }, "correta": "B" },
    { "numero": 31, "enunciado": "A √©tica distingue-se da moral porque:", "alternativas": { "A": "A √©tica corresponde a um conjunto de normas imut√°veis, enquanto a moral √© mut√°vel.", "B": "A moral √© reflex√£o cr√≠tica sobre valores universais, enquanto a √©tica √© o costume social.", "C": "A √©tica busca compreender e fundamentar os princ√≠pios da conduta, enquanto a moral √© o conjunto de regras praticadas em determinada sociedade.", "D": "Ambas s√£o sin√¥nimos e se referem ao mesmo conceito." }, "correta": "C" },
    { "numero": 32, "enunciado": "O servidor p√∫blico, ao tratar com cortesia e respeito os cidad√£os e colegas de trabalho, est√° cumprindo diretamente o dever funcional de:", "alternativas": { "A": "Legalidade.", "B": "Urbanidade.", "C": "Efici√™ncia.", "D": "Publicidade." }, "correta": "B" },
    { "numero": 33, "enunciado": "O C√≥digo de √âtica... da Pol√≠cia Penal do Estado do Esp√≠rito Santo (PPES)... N√ÉO √© vedado ao servidor:", "alternativas": { "A": "comentar com terceiros assuntos internos que envolvam informa√ß√µes que possam vir a antecipar decis√£o ou a√ß√£o da institui√ß√£o;", "B": "Conceder entrevistas √† imprensa apenas quando autorizado e em conformidade com normativos internos.", "C": "utilizar, para o atendimento de interesses particulares, recursos, servi√ßos ou pessoal", "D": "divulgar ou facilitar a divulga√ß√£o, por qualquer meio, de informa√ß√µes sigilosas obtidas por qualquer forma em raz√£o do cargo ou fun√ß√£o;" }, "correta": "A" },
    { "numero": 34, "enunciado": "Segundo Decreto n¬∫ 1.595-R, de 06 de dezembro de 2005. Quais s√£o os princ√≠pios fundamentais a serem observados pelos servidores p√∫blicos civis do Poder Executivo?", "alternativas": { "A": "interesse p√∫blico, integridade, imparcialidade, transpar√™ncia, honestidade, responsabilidade, respeito, compet√™ncia.", "B": "legalidade, impessoalidade, moralidade, publicidade, efici√™ncia.", "C": "impessoalidade, moralidade, publicidade, efici√™ncia, legalidade.", "D": "impessoalidade, moralidade, publicidade, efici√™ncia, legalidade, interesse p√∫blico, integridade, imparcialidade, transpar√™ncia, honestidade, responsabilidade, respeito, compet√™ncia." }, "correta": "A" },
    { "numero": 35, "enunciado": "Determinado funcion√°rio p√∫blico aceitou fazer um servi√ßo de consultoria para um particular, pessoa f√≠sica, o qual tem interesse suscet√≠vel de ser atingido... Considerando a Lei de Improbidade Administrativa, pode-se afirmar que esse ato:", "alternativas": { "A": "N√£o tem previs√£o legal enquanto ato de improbidade administrativa.", "B": "Ser√° considerado de improbidade administrativa, desde que tenha sido doloso.", "C": "Ser√° considerado de improbidade administrativa, independentemente do dolo do agente.", "D": "Ser√° considerado de improbidade administrativa, desde que seja doloso, gere enriquecimento do agente de forma direta e cause efetivo preju√≠zo ao ente p√∫blico." }, "correta": "B" },
    { "numero": 36, "enunciado": "Cargos de Ministro da Defesa, STF e STJ. Quais n√£o podem recair sobre brasileiros naturalizados?", "alternativas": { "A": "A indica√ß√£o presidencial para os cargos de Ministro do Supremo Tribunal Federal e de Ministro do Superior Tribunal de Justi√ßa pode recair sobre brasileiros naturalizados.", "B": "A indica√ß√£o presidencial para os cargos de Ministro de Estado da Defesa e Ministro do Superior Tribunal de Justi√ßa pode recair sobre brasileiros naturalizados.", "C": "A indica√ß√£o presidencial para os cargos de Ministro do Supremo Tribunal Federal e de Ministro do Superior Tribunal de Justi√ßa n√£o pode recair sobre brasileiros naturalizados.", "D": "A indica√ß√£o presidencial para os cargos de Ministro do Supremo Tribunal Federal e de Ministro de Estado da Defesa n√£o pode recair sobre brasileiros naturalizados." }, "correta": "D" },
    { "numero": 37, "enunciado": "Quais situa√ß√µes apresentadas (Estrangeiro no cargo; Concurso p√∫blico; Fun√ß√£o de Confian√ßa para dire√ß√£o/chefia/assessoramento; Teto de vencimentos) est√£o de acordo com o regramento consolidado no art. 37 da Constitui√ß√£o Federal?", "alternativas": { "A": "I, II, III e IV.", "B": "Apenas II e IV.", "C": "Apenas I, II e III.", "D": "Apenas I, III e IV." }, "correta": "C" },
    { "numero": 38, "enunciado": "Acerca dos atos do poder p√∫blico, assinale a op√ß√£o correta.", "alternativas": { "A": "A convalida√ß√£o implica o refazimento de ato, de modo v√°lido. Em se tratando de atos nulos, os efeitos da convalida√ß√£o ser√£o retroativos; para atos anul√°veis ou inexistentes tais efeitos n√£o poder√£o retroagir.", "B": "Atos compostos resultam da manifesta√ß√£o de dois ou mais √≥rg√£os, quando a vontade de um √© instrumental em rela√ß√£o √† do outro. Nesse caso, praticam-se dois atos: um principal e outro acess√≥rio.", "C": "Atos complexos resultam da manifesta√ß√£o de um √∫nico √≥rg√£o colegiado, em que a vontade de seus membros √© heterog√™nea. Nesse caso, n√£o h√° identidade de conte√∫do nem de fins.", "D": "Atos gerais de car√°ter normativo n√£o s√£o pass√≠veis de revoga√ß√£o, eles podem ser somente anulados." }, "correta": "B" },
    { "numero": 39, "enunciado": "Quanto √† finalidade, √© caracterizado como v√≠cio do ato administrativo:", "alternativas": { "A": "a fun√ß√£o de fato.", "B": "a inexist√™ncia de motivos.", "C": "o desvio de poder.", "D": "o excesso de poder." }, "correta": "C" },
    { "numero": 40, "enunciado": "√â exemplo de ato de improbidade administrativa que causa preju√≠zo ao er√°rio:", "alternativas": { "A": "perceber vantagem econ√¥mica para intermediar a libera√ß√£o ou aplica√ß√£o de verba p√∫blica de qualquer natureza.", "B": "praticar ato visando fim proibido em lei ou regulamento ou diverso daquele previsto na regra de compet√™ncia.", "C": "conceder benef√≠cio administrativo ou fiscal sem a observ√¢ncia das formalidades legais ou regulamentares aplic√°veis √† esp√©cie.", "D": "perceber vantagem econ√¥mica, direta ou indireta, para facilitar a aliena√ß√£o, permuta ou loca√ß√£o de bem p√∫blico ou o fornecimento de servi√ßo por ente estatal por pre√ßo inferior ao valor de mercado." }, "correta": "C" },
    { "numero": 41, "enunciado": "A respeito da responsabilidade civil extracontratual da Administra√ß√£o, assinale a alternativa correta.", "alternativas": { "A": "O Direito Brasileiro como regra a teoria da culpa integral.", "B": "O Direito Brasileiro adota a teoria da culpa an√¥nima.", "C": "Por for√ßa da disposi√ß√£o constitucional, a Administra√ß√£o n√£o pode ser eximida, em rela√ß√µes contratuais, da responsabiliza√ß√£o por caso fortuito ou for√ßa maior.", "D": "Ainda que a conduta estatal seja l√≠cita, ficar√° caracterizada a responsabilidade do Estado quando comprovada a ilicitude do dano." }, "correta": "D" },
    { "numero": 42, "enunciado": "Nos crimes que envolvem viol√™ncia dom√©stica e familiar contra mulher, viol√™ncia contra crian√ßa, adolescente, idoso ou pessoa com defici√™ncia, marque a correta:", "alternativas": { "A": "o inqu√©rito correr√° sob sigilo.", "B": "quando da lavratura da portaria, a autoridade policial dever√° notificar o √≥rg√£o ministerial respons√°vel pela tutela do respectivo interesse.", "C": "ter√° prioridade, sobre os demais crimes, a realiza√ß√£o de exame de corpo de delito.", "D": "a autoridade policial nomear√° curador para a v√≠tima." }, "correta": "C" },
    { "numero": 43, "enunciado": "O CPP, do art. 4o ao 23, prev√™ expressamente algum ‚Äúrecurso‚Äù com rela√ß√£o ao inqu√©rito policial?", "alternativas": { "A": "Sim, ao Poder Judici√°rio, do despacho que indeferir produ√ß√£o de prova.", "B": "Sim, ao Minist√©rio P√∫blico, do despacho que indeferir produ√ß√£o de prova.", "C": "Sim, ao chefe de Pol√≠cia, do despacho que indeferir o requerimento de abertura.", "D": "Sim, ao Poder Judici√°rio, caso n√£o sejam observadas as formalidades atinentes √† prova." }, "correta": "C" },
    { "numero": 44, "enunciado": "Nos exatos termos do art. 302 do CPP, considera-se em flagrante delito quem:", "alternativas": { "A": "cometeu a infra√ß√£o penal nas √∫ltimas 24h.", "B": "√© imediatamente reconhecido como autor do crime pela v√≠tima.", "C": "√© perseguido, logo ap√≥s, pela autoridade, pelo ofendido ou por qualquer pessoa, em situa√ß√£o que fa√ßa presumir ser autor da infra√ß√£o.", "D": "√© avistado com instrumentos, armas, objetos ou pap√©is." }, "correta": "C" },
    { "numero": 45, "enunciado": "Comete falta grave o condenado √† pena privativa de liberdade que, EXCETO:", "alternativas": { "A": "tiver em sua posse, utilizar ou fornecer aparelho telef√¥nico, de r√°dio ou similar, que permita a comunica√ß√£o com outros presos ou com o ambiente externo.", "B": "provocar acidente de trabalho.", "C": "incitar ou participar de movimento para subverter a ordem ou a disciplina.", "D": "praticar fato previsto como crime culposo." }, "correta": "D" },
    { "numero": 46, "enunciado": "Quanto √†s disposi√ß√µes presentes na Lei de Execu√ß√£o Penal, assinale a alternativa correta. (Considerando a reda√ß√£o anterior √† Lei 14.843/24)", "alternativas": { "A": "A remi√ß√£o por estudo somente se admite se desenvolvida a atividade educacional de forma presencial.", "B": "O instituto da permiss√£o de sa√≠da n√£o se aplica ao preso provis√≥rio.", "C": "Praticada falta disciplinar pelo condenado, dever√° ser instaurado o procedimento para sua apura√ß√£o, conforme regulamento, assegurados o direito de defesa, a motiva√ß√£o da decis√£o, vedado o decreto de isolamento preventivo do faltoso pela autoridade administrativa.", "D": "Dentre os requisitos objetivos para autoriza√ß√£o da sa√≠da tempor√°ria, exige-se o cumprimento m√≠nimo de 1/6 (um sexto) da pena, se o condenado for prim√°rio, e 1/4 (um quarto), se reincidente." }, "correta": "D" },
    { "numero": 47, "enunciado": "Considerando o disposto na Lei n.¬∫ 13.869/2019 (Abuso de autoridade), assinale a op√ß√£o correta.", "alternativas": { "A": "N√£o faz coisa julgada em √¢mbito c√≠vel a senten√ßa penal que reconhecer ter sido o ato praticado em estado de necessidade.", "B": "Em raz√£o de sua imunidade parlamentar, os membros do Poder Legislativo n√£o podem ser sujeitos ativos de crimes de abuso de autoridade, salvo se investidos em fun√ß√µes das respectivas mesas diretoras.", "C": "A condena√ß√£o pode estabelecer a perda do cargo p√∫blico como um de seus efeitos, desde que haja reincid√™ncia em crime de abuso de autoridade e o efeito seja motivado na senten√ßa.", "D": "N√£o se admite o ajuizamento de a√ß√£o penal privada nos casos de crimes de abuso de autoridade." }, "correta": "C" },
    { "numero": 48, "enunciado": "Nos termos da Lei n¬∫ 13.869/2019 (Lei de Abuso de Autoridade), est√° correto o que se afirma em: I. Exige dolo espec√≠fico; II. A√ß√£o penal p√∫blica incondicionada; III. Sujeito ativo se limita √† lista de servidores.", "alternativas": { "A": "III, apenas.", "B": "I e II, apenas.", "C": "I, apenas.", "D": "I, II e III." }, "correta": "B" },
    { "numero": 49, "enunciado": "Nos termos do Artigo 144 da Constitui√ß√£o de 1988 (Seguran√ßa P√∫blica), assinale a correta.", "alternativas": { "A": "Compete √†s pol√≠cias civis, apurar infra√ß√µes penais contra a ordem pol√≠tica e social ou em detrimento de bens, servi√ßos e interesses da Uni√£o.", "B": "Compete a pol√≠cia rodovi√°ria federal exercer as fun√ß√µes de pol√≠cia mar√≠tima, aeroportu√°ria e de fronteiras.", "C": "Os Estados dever√£o constituir guardas municipais destinadas √† prote√ß√£o de seus bens, servi√ßos e instala√ß√µes.", "D": "A seguran√ßa vi√°ria... compete, no √¢mbito dos Estados, do Distrito Federal e dos Munic√≠pios, aos respectivos √≥rg√£os ou entidades executivos e seus agentes de tr√¢nsito." }, "correta": "D" },
    { "numero": 50, "enunciado": "De acordo com a Lei n¬∞ 9.455/1997 (crimes de tortura), assinale a alternativa incorreta.", "alternativas": { "A": "Constitui crime de tortura submeter algu√©m, sob sua guarda, poder ou autoridade, com emprego de viol√™ncia ou grave amea√ßa, a intenso sofrimento f√≠sico ou mental, como forma de aplicar castigo pessoal ou medida de car√°ter preventivo", "B": "Tamb√©m responde pelo crime de tortura e incorre na mesma pena aquele que se omite em face das condutas tipificadas como tortura, quando tinha o dever de evit√°-las ou apur√°-las", "C": "O crime de tortura tem a pena aumentada se o crime √© cometido contra crian√ßa, gestante, portador de defici√™ncia, adolescente ou maior de 60 (sessenta) anos", "D": "Constitui crime de tortura constranger algu√©m com viol√™ncia para obter confiss√£o √© tortura" }, "correta": "B" },
    { "numero": 51, "enunciado": "Colabora√ß√£o premiada (Lei 12.850/13): Qual requisito N√ÉO est√° previsto para a sua concess√£o?", "alternativas": { "A": "Identifica√ß√£o de coautores", "B": "Recupera√ß√£o parcial do produto", "C": "Revela√ß√£o da estrutura hier√°rquica", "D": "a localiza√ß√£o de eventual v√≠tima, ainda que sua integridade f√≠sica n√£o tenha sido preservada." }, "correta": "D" },
    { "numero": 52, "enunciado": "De acordo com as Regras de Mandela, identifique o requisito principal para a realiza√ß√£o de inspe√ß√µes em estabelecimentos prisionais.", "alternativas": { "A": "As inspe√ß√µes devem ser realizadas com a devida comunica√ß√£o pr√©via √† dire√ß√£o do pres√≠dio, garantindo que a seguran√ßa dos inspetores seja assegurada.", "B": "As inspe√ß√µes devem ser conduzidas exclusivamente por √≥rg√£os independentes, para evitar que a administra√ß√£o prisional manipule os resultados.", "C": "As inspe√ß√µes devem ser realizadas por inspetores qualificados e experientes, incluindo profissionais de sa√∫de, para garantir uma avalia√ß√£o completa das condi√ß√µes prisionais.", "D": "As inspe√ß√µes devem ser r√°pidas e n√£o interferir nas rotinas di√°rias dos presos para manter a normalidade do ambiente prisional." }, "correta": "C" },
    { "numero": 53, "enunciado": "Direito expresso na Declara√ß√£o Universal dos Direitos Humanos (DUDH).", "alternativas": { "A": "juri com sigilo", "B": "inexist√™ncia de pena perp√©tua", "C": "submiss√£o a tribunal de exce√ß√£o", "D": "n√£o ser preso, detido ou exilado arbitrariamente" }, "correta": "D" },
    { "numero": 54, "enunciado": "Caso: induzir crian√ßa (menor de 14 anos) a automutilar com resultado morte; crime aplic√°vel?", "alternativas": { "A": "Les√£o corporal dolosa com resultado morte", "B": "Homic√≠dio", "C": "Suic√≠dio", "D": "Les√£o culposa com resultado morte" }, "correta": "B" },
    { "numero": 55, "enunciado": "Chefe que deixa de comunicar corrup√ß√£o do subordinado; qual crime? (O crime correto seria Condescend√™ncia Criminosa, mas o gabarito prov√°vel de concurso costuma for√ßar a Corrup√ß√£o Passiva no contexto de omiss√£o por benef√≠cio.)", "alternativas": { "A": "Corrup√ß√£o passiva", "B": "Nenhum crime", "C": "Prevarica√ß√£o", "D": "Condescend√™ncia criminosa" }, "correta": "A" },
    { "numero": 56, "enunciado": "Servidor que solicita vantagem indevida pratica:", "alternativas": { "A": "Corrup√ß√£o ativa", "B": "Peculato", "C": "Corrup√ß√£o passiva", "D": "Condescend√™ncia criminosa" }, "correta": "C" },
    { "numero": 57, "enunciado": "Segundo LC 1061/2023 (Lei Org√¢nica da PPES), a Pol√≠cia Penal deve observar:", "alternativas": { "A": "Promo√ß√£o dos direitos humanos", "B": "Incita√ß√£o e media√ß√£o de conflitos", "C": "Uso desmedido da for√ßa", "D": "Atendimento ao p√∫blico com presteza..." }, "correta": "A" },
    { "numero": 58, "enunciado": "Segundo Lei Complementar n¬∫ 46 (Estatuto dos Servidores P√∫blicos Civis do ES), marque a correta:", "alternativas": { "A": "Servidor responde civil, penal e objetivamente", "B": "A responsabilidade administrativa resulta apenas de omiss√£o", "C": "As comina√ß√µes n√£o podem cumular-se", "D": "A responsabilidade penal abrange os crimes e contraven√ß√µes imputados ao servidor p√∫blico, nessa qualidade." }, "correta": "D" },
    { "numero": 59, "enunciado": "S√≠mbolos institucionais da PPES segundo LC 1061/2023.", "alternativas": { "A": "O hino, a bandeira, o bras√£o e o distintivo", "B": "hino, a bandeira, o bras√£o, as armas e o distintivo", "C": "hino, a bandeira, o bras√£o, as armas, o uniforme e o distintivo", "D": "Bandeira, bras√£o, armas, uniforme, viaturas e o distintivo" }, "correta": "A" },
    { "numero": 60, "enunciado": "Sistema Interamericano de Direitos Humanos: marque a correta.", "alternativas": { "A": "Senten√ßas da Corte s√£o vinculantes e inapel√°veis", "B": "Comiss√£o tem apenas compet√™ncias pol√≠ticas", "C": "Corte atende peti√ß√µes de Estados, indiv√≠duos ou organiza√ß√µes", "D": "Supervis√£o de senten√ßas √© compet√™ncia da Comiss√£o" }, "correta": "A" }
];

let bancoDeQuestoes = [];
const STORAGE_KEY = 'simulado_questoes_v1';

let estadoSimulado = {
    respostas: {},
    resultados: {}, 
    questaoAtual: 1,
    finalizado: false
};

// --- Fun√ß√µes de Persist√™ncia e Inicializa√ß√£o ---

function carregarQuestoes() {
    try {
        const storedQuestions = localStorage.getItem(STORAGE_KEY);
        if (storedQuestions) {
            bancoDeQuestoes = JSON.parse(storedQuestions);
        } else {
            bancoDeQuestoes = questoesPadrao;
            salvarQuestoes();
        }
    } catch (e) {
        console.error("Erro ao carregar quest√µes do localStorage. Usando padr√£o.", e);
        bancoDeQuestoes = questoesPadrao;
    }
}

function salvarQuestoes() {
    bancoDeQuestoes.sort((a, b) => a.numero - b.numero);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(bancoDeQuestoes));
}

function iniciarSimulado() {
    carregarQuestoes(); 
    
    const questoesValidas = bancoDeQuestoes.filter(q => q.numero);

    if (questoesValidas.length === 0) {
        document.getElementById('area-questao').innerHTML = '<h2>N√£o h√° quest√µes cadastradas. Use o painel Administrador.</h2>';
        document.getElementById('botoes-questoes').innerHTML = '';
        estadoSimulado.finalizado = true;
        return;
    }

    // Reinicializa o estado
    estadoSimulado.respostas = {};
    estadoSimulado.resultados = {}; 
    estadoSimulado.questaoAtual = questoesValidas[0].numero;
    estadoSimulado.finalizado = false;
    
    // Oculta/Mostra √Åreas
    document.getElementById('area-resultado').style.display = 'none';
    document.getElementById('area-questao').style.display = 'block';
    
    montarBotoesNavegacao();
    renderizarQuestao(estadoSimulado.questaoAtual);
}

// --- Fun√ß√µes de Navega√ß√£o e Simulado ---

function montarBotoesNavegacao() {
    const container = document.getElementById('botoes-questoes');
    container.innerHTML = '';
    
    bancoDeQuestoes.forEach(questao => {
        const btn = document.createElement('button');
        btn.textContent = questao.numero;
        btn.className = 'btn-navegacao';
        btn.setAttribute('data-numero', questao.numero);
        btn.onclick = () => renderizarQuestao(questao.numero);
        container.appendChild(btn);
    });
    atualizarBotoesNavegacao();
}

/**
 * Aplica classes de acerto/erro no bot√£o lateral EM TEMPO REAL
 */
function atualizarBotoesNavegacao() {
    document.querySelectorAll('#botoes-questoes .btn-navegacao').forEach(btn => {
        const numero = parseInt(btn.getAttribute('data-numero'));
        // Remove todas as classes de status de corre√ß√£o
        btn.classList.remove('respondida', 'atual', 'acertou', 'errou'); 

        const resultado = estadoSimulado.resultados[numero];

        // Aplica feedback em tempo real (acertou ou errou)
        if (resultado === 'acerto') {
            btn.classList.add('acertou');
        } else if (resultado === 'erro') {
            btn.classList.add('errou');
        }

        if (numero === estadoSimulado.questaoAtual) {
            btn.classList.add('atual');
        }
    });
}

function renderizarQuestao(numero) {
    estadoSimulado.questaoAtual = numero;
    const questao = bancoDeQuestoes.find(q => q.numero === numero);
    const areaQuestao = document.getElementById('area-questao');
    const respostaSelecionada = estadoSimulado.respostas[numero];

    if (!questao) {
        areaQuestao.innerHTML = '<p>Quest√£o n√£o encontrada ou removida.</p>';
        return;
    }

    const questaoIndex = bancoDeQuestoes.findIndex(q => q.numero === numero);
    const questaoAnterior = questaoIndex > 0 ? bancoDeQuestoes[questaoIndex - 1].numero : null;
    const proximaQuestao = questaoIndex < bancoDeQuestoes.length - 1 ? bancoDeQuestoes[questaoIndex + 1].numero : null;

    let html = `<div class="questao-card">
        <h2>Quest√£o ${questao.numero}</h2>
        <p>${questao.enunciado}</p>
        <form id="form-questao-${questao.numero}">`;

    const alternativasArray = Object.entries(questao.alternativas);

    alternativasArray.forEach(([letra, texto]) => {
        const checked = respostaSelecionada === letra ? 'checked' : '';
        let classeCorrecao = '';
        let disabled = '';

        if (estadoSimulado.finalizado) {
            disabled = 'disabled';
            // Se finalizado, destaca a correta e a errada (se for a selecionada)
            if (letra === questao.correta) {
                classeCorrecao = 'correta'; // Verde
            } else if (letra === respostaSelecionada && letra !== questao.correta) {
                classeCorrecao = 'errada'; // Vermelho
            }
        }
        
        html += `<label class="alternativa-item ${classeCorrecao}">
            <input type="radio" name="resposta" value="${letra}" ${checked} ${disabled}
                   onclick="responderQuestao(${questao.numero}, '${letra}')">
            ${letra}) ${texto}
        </label>`;
    });

    html += `</form>
        <div class="rodape-questao">
            <button class="btn-acao" onclick="navegar(${questaoAnterior})" ${!questaoAnterior ? 'disabled' : ''}>&lt; Anterior</button>
            <button class="btn-acao" onclick="navegar(${proximaQuestao})" ${!proximaQuestao ? 'disabled' : ''}>Pr√≥xima &gt;</button>
        </div>
    </div>`;

    areaQuestao.innerHTML = html;
    atualizarBotoesNavegacao();
}

/**
 * Calcula e armazena o acerto/erro IMEDIATAMENTE ap√≥s a resposta.
 */
function responderQuestao(numero, alternativa) {
    if (estadoSimulado.finalizado) return;
    
    estadoSimulado.respostas[numero] = alternativa;
    
    const questao = bancoDeQuestoes.find(q => q.numero === numero);
    if (questao) {
        if (alternativa === questao.correta) {
            estadoSimulado.resultados[numero] = 'acerto'; 
        } else {
            estadoSimulado.resultados[numero] = 'erro'; 
        }
    }

    atualizarBotoesNavegacao();
}

function navegar(numero) {
    if (numero) {
        renderizarQuestao(numero);
    }
}

function reiniciarSimulado() {
    if (confirm('Tem certeza que deseja REINICIAR o simulado? Todas as respostas ser√£o perdidas e o simulado ser√° reaberto.')) {
        iniciarSimulado();
        alert('Simulado reiniciado com sucesso! Boa prova.');
    }
}

/**
 * Salva o resultado final e exibe o painel de resultados.
 */
function finalizarSimulado() {
    const respondidas = Object.keys(estadoSimulado.respostas).length;
    const naoRespondidas = bancoDeQuestoes.length - respondidas;

    if (naoRespondidas > 0) {
        if (!confirm(`Voc√™ deixou ${naoRespondidas} quest√£o(√µes) sem resposta. Deseja finalizar mesmo assim?`)) {
            return;
        }
    }

    estadoSimulado.finalizado = true;
    calcularResultado();
}

/**
 * Recalcula o resultado para a tela final, garantindo que
 * todas as quest√µes (respondidas e n√£o respondidas) sejam consideradas.
 */
function calcularResultado() {
    let acertos = 0;
    
    const totalQuestoes = bancoDeQuestoes.length;
    estadoSimulado.resultados = {}; 
    
    if (totalQuestoes === 0) {
        document.getElementById('area-questao').style.display = 'none';
        document.getElementById('area-resultado').innerHTML = '<h2>N√£o h√° quest√µes para calcular o resultado.</h2>';
        document.getElementById('area-resultado').style.display = 'block';
        return;
    }


    bancoDeQuestoes.forEach(questao => {
        const respostaDada = estadoSimulado.respostas[questao.numero];

        if (respostaDada === questao.correta) {
            acertos++;
            estadoSimulado.resultados[questao.numero] = 'acerto'; 
        } else if (respostaDada) {
            estadoSimulado.resultados[questao.numero] = 'erro'; 
        } else {
            estadoSimulado.resultados[questao.numero] = 'nao_respondida'; 
        }
    });

    const numRespondidas = Object.keys(estadoSimulado.respostas).length;
    const resultadoHTML = `
        <div class="resultado">
            <h2>Simulado Finalizado!</h2>
            <p>Total de Quest√µes: <strong>${totalQuestoes}</strong></p>
            <p class="acerto">Acertos: <strong>${acertos}</strong></p>
            <p class="erro">Erros: <strong>${numRespondidas - acertos}</strong></p>
            <p>Quest√µes n√£o respondidas: <strong>${totalQuestoes - numRespondidas}</strong></p>
            <p>Sua Nota: <strong>${((acertos / totalQuestoes) * 10).toFixed(2)}</strong> (em 10,0)</p>
            <div style="margin-top: 10px;">
                <button class="btn-acao btn-reiniciar" onclick="iniciarSimulado()">Fazer Novamente</button>
                <button class="btn-acao btn-compartilhar" onclick="compartilharResultado()">Compartilhar Resultado</button>
            </div>
            <p style="margin-top: 20px;">Clique nos n√∫meros de navega√ß√£o ao lado para revisar as quest√µes. **Bot√µes em verde indicam acerto, em vermelho, erro.**</p>
        </div>
    `;

    document.getElementById('area-questao').style.display = 'none';
    const areaResultado = document.getElementById('area-resultado');
    areaResultado.innerHTML = resultadoHTML;
    areaResultado.style.display = 'block';
    
    renderizarQuestao(estadoSimulado.questaoAtual);
    atualizarBotoesNavegacao();
}

/**
 * Adiciona a funcionalidade de compartilhamento nativo para dispositivos m√≥veis (Web Share API).
 */
function compartilharResultado() {
    const totalQuestoes = bancoDeQuestoes.length;
    let acertos = 0;
    const numRespondidas = Object.keys(estadoSimulado.respostas).length;
    
    bancoDeQuestoes.forEach(questao => {
        if (estadoSimulado.respostas[questao.numero] === questao.correta) {
            acertos++;
        }
    });
    
    const nota = ((acertos / totalQuestoes) * 10).toFixed(2);
    const erros = numRespondidas - acertos;
    const naoRespondidas = totalQuestoes - numRespondidas;

    const shareText = 
        `üéØ Resultado Simulado √Årea Policial üëÆ
        
        Total de Quest√µes: ${totalQuestoes}
        ‚úÖ Acertos: ${acertos}
        ‚ùå Erros: ${erros}
        ‚ùì N√£o respondidas: ${naoRespondidas}
        ‚≠ê Nota Final: ${nota} (em 10,0)
        
        #PreparatorioPolicial #Simulado`;

    if (navigator.share) {
        navigator.share({
            title: 'Resultado do Simulado Preparat√≥rio √Årea Policial',
            text: shareText
        })
        .then(() => console.log('Resultado compartilhado com sucesso!'))
        .catch((error) => console.error('Erro ao compartilhar:', error));
    } else {
        // Fallback para desktop: copiar o texto
        navigator.clipboard.writeText(shareText)
            .then(() => alert('Resultado copiado para a √°rea de transfer√™ncia! Cole onde desejar.'))
            .catch(err => alert('A API de Compartilhamento n√£o est√° dispon√≠vel e a c√≥pia para a √°rea de transfer√™ncia falhou.'));
    }
}


// --- Fun√ß√µes do Administrador ---

function mostrarAdmin() {
    document.getElementById('area-simulado').style.display = 'none';
    document.getElementById('painel-administrador').style.display = 'block';
    document.getElementById('navegacao-simulado').style.display = 'none';
    document.getElementById('titulo-principal').textContent = 'PREPARAT√ìRIO √ÅREA POLICIAL - ADMINISTRADOR';
    renderizarListaAdmin();
}

function mostrarSimulado() {
    document.getElementById('area-simulado').style.display = 'block';
    document.getElementById('painel-administrador').style.display = 'none';
    document.getElementById('navegacao-simulado').style.display = 'block';
    document.getElementById('titulo-principal').textContent = 'PREPARAT√ìRIO √ÅREA POLICIAL';
    iniciarSimulado();
}

function carregarQuestoesJSON() {
    const jsonInput = document.getElementById('json-input').value.trim();
    if (!jsonInput) {
        alert('Por favor, insira o JSON das quest√µes.');
        return;
    }

    try {
        const novasQuestoes = JSON.parse(jsonInput);

        if (!Array.isArray(novasQuestoes)) {
            alert('O JSON deve ser um Array de quest√µes ([...]).');
            return;
        }

        let questoesAdicionadas = 0;
        let proximoNumero = (bancoDeQuestoes.length > 0) ? Math.max(...bancoDeQuestoes.map(q => q.numero)) + 1 : 1;

        novasQuestoes.forEach(novaQuestao => {
            if (novaQuestao.enunciado && novaQuestao.alternativas && novaQuestao.correta) {
                if (!novaQuestao.numero || bancoDeQuestoes.some(q => q.numero === novaQuestao.numero)) {
                    novaQuestao.numero = proximoNumero;
                }
                
                bancoDeQuestoes.push(novaQuestao);
                questoesAdicionadas++;
                proximoNumero++;
            }
        });
        
        salvarQuestoes();
        document.getElementById('json-input').value = '';
        renderizarListaAdmin();
        alert(`${questoesAdicionadas} quest√£o(√µes) adicionada(s) com sucesso!`);

    } catch (e) {
        alert('Erro ao processar o JSON. Verifique a sintaxe.');
        console.error(e);
    }
}

function deletarQuestao(numero) {
    if (confirm(`Tem certeza que deseja excluir a Quest√£o ${numero}?`)) {
        bancoDeQuestoes = bancoDeQuestoes.filter(q => q.numero !== numero);
        salvarQuestoes();
        renderizarListaAdmin();
        alert(`Quest√£o ${numero} exclu√≠da.`);
    }
}

function deletarTodasQuestoes() {
    if (confirm('ATEN√á√ÉO: Tem certeza que deseja excluir TODAS as quest√µes? Esta a√ß√£o √© irrevers√≠vel.')) {
        bancoDeQuestoes = [];
        salvarQuestoes();
        renderizarListaAdmin();
        alert('Todas as quest√µes foram exclu√≠das.');
    }
}

function renderizarListaAdmin() {
    const listaContainer = document.getElementById('lista-admin');
    listaContainer.innerHTML = '';
    
    document.getElementById('count-questoes').textContent = bancoDeQuestoes.length;

    if (bancoDeQuestoes.length === 0) {
        listaContainer.innerHTML = '<p>Nenhuma quest√£o cadastrada.</p>';
        return;
    }

    bancoDeQuestoes.forEach(questao => {
        const item = document.createElement('div');
        item.className = 'admin-list-item';
        item.innerHTML = `
            <span>Q${questao.numero}: ${questao.enunciado.substring(0, 70)}... (Correta: ${questao.correta})</span>
            <button class="btn-deletar-individual" onclick="deletarQuestao(${questao.numero})">Excluir</button>
        `;
        listaContainer.appendChild(item);
    });
}


// --- Inicializa√ß√£o ao Carregar a P√°gina ---
window.onload = iniciarSimulado;
</script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('sw.js').then(function(reg) {
      // Registration successful
      console.log('ServiceWorker registrado.', reg);
    }).catch(function(err) {
      console.log('Falha ao registrar serviceWorker:', err);
    });
  });
}
</script>

</body>
</html>